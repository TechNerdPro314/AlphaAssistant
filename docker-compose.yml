version: '3.8'

services:
  web:
    # Собирать образ из Dockerfile в текущей директории
    build: .
    # Имя контейнера для удобства
    container_name: alpha_assistant_web
    # Пробрасываем порт 5000 с хоста на порт 5000 в контейнере
    ports:
      - "5000:5000"
    # Подключаем наш .env файл для передачи переменных окружения
    env_file:
      - .env
    # Подключаем volumes для разработки:
    # 1. Код будет синхронизироваться между хостом и контейнером
    # 2. Файл базы данных SQLite будет сохраняться на хосте
    volumes:
      - .:/app
    # Перезапускать контейнер, если он упал
    restart: unless-stopped
