services:
  web:
    build: .
    container_name: alpha_assistant_web
    ports:
      - "5000:5000"
    env_file:
      - .env
    volumes:
      - .:/app
      - ./models:/app/models # ДОБАВЬТЕ ЭТО для моделей ИИ
      - ./data:/app/data # ДОБАВЬТЕ ЭТО для данных ИИ
    command: gunicorn --bind 0.0.0.0:5000 run:app
    restart: unless-stopped

  bot:
    build: .
    container_name: alpha_assistant_bot
    env_file:
      - .env
    volumes:
      - .:/app
      - ./models:/app/models # ДОБАВЬТЕ ЭТО для моделей ИИ
      - ./data:/app/data # ДОБАВЬТЕ ЭТО для данных ИИ
    # ИСПРАВЛЕННЫЙ ВАРИАНТ - используем тот же entrypoint, но с другим command
    command: [ "python", "bot.py" ]
    depends_on:
      - web
    restart: unless-stopped
